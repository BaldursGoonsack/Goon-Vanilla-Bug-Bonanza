// ==================================== Moonbeam - Synergy with Evocation Wizard's "Sculpt Spells" feature / The last spellcasting ability obtained during level up will not be used inappropriately ====================================
// Both Expansion by Diz and Valdacil's Spell Adjustments by valdacil perpetuate these bugs in their level 7-9 upcasting

new entry "MOONBEAM"
type "StatusData"
data "StatusType" "BOOST"
using "MOONBEAM"
// data "OnApplyRoll" "not SavingThrow(Ability.Constitution,CalculateSpellDC(context.PreferredCastingAbility, GetSummoner(context.Source)))"
data "OnApplyRoll" "not SavingThrow(Ability.Constitution,RecastSpellDC({'Wisdom','Charisma'},10,GetSummoner(context.Source)))"
// data "OnTickRoll" "not SavingThrow(Ability.Constitution,CalculateSpellDC(context.PreferredCastingAbility, GetSummoner(context.Source)))"
data "OnTickRoll" "not SavingThrow(Ability.Constitution,RecastSpellDC({'Wisdom','Charisma'},10,GetSummoner(context.Source)))"

new entry "MOONBEAM_AURA"
type "StatusData"
data "StatusType" "BOOST"
using "MOONBEAM_AURA"
// data "AuraStatuses" "TARGET:IF(Character()and not Dead()):ApplyStatus(MOONBEAM,100,-1)"
data "AuraStatuses" "TARGET:IF(Character() and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM,100,-1)"
data "TooltipSave" "Constitution"

new entry "MOONBEAM_AURA_3"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_AURA"
using "MOONBEAM_AURA_3"
// data "AuraStatuses" "TARGET:IF(Character()and not Dead()):ApplyStatus(MOONBEAM_3,100,-1)"
data "AuraStatuses" "TARGET:IF(Character() and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM_3,100,-1)"

new entry "MOONBEAM_AURA_4"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_AURA"
using "MOONBEAM_AURA_4"
// data "AuraStatuses" "TARGET:IF(Character()and not Dead()):ApplyStatus(MOONBEAM_4,100,-1)"
data "AuraStatuses" "TARGET:IF(Character() and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM_4,100,-1)"

new entry "MOONBEAM_AURA_5"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_AURA"
using "MOONBEAM_AURA_5"
// data "AuraStatuses" "TARGET:IF(Character()and not Dead()):ApplyStatus(MOONBEAM_5,100,-1)"
data "AuraStatuses" "TARGET:IF(Character()and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM_5,100,-1)"

new entry "MOONBEAM_AURA_6"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_AURA"
using "MOONBEAM_AURA_6"
// data "AuraStatuses" "TARGET:IF(Character()and not Dead()):ApplyStatus(MOONBEAM_6,100,-1)"
data "AuraStatuses" "TARGET:IF(Character()and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM_6,100,-1)"

new entry "MOONBEAM_AURA_7"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_AURA"
using "MOONBEAM_AURA_7"
// data "AuraStatuses" "TARGET:IF(Character() and not Dead()):ApplyStatus(MOONBEAM_7,100,-1)"
data "AuraStatuses" "TARGET:IF(Character()and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM_7,100,-1)"

new entry "MOONBEAM_AURA_8"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_AURA"
using "MOONBEAM_AURA_8"
// data "AuraStatuses" "TARGET:IF(Character() and not Dead()):ApplyStatus(MOONBEAM_8,100,-1)"
data "AuraStatuses" "TARGET:IF(Character()and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM_8,100,-1)"

new entry "MOONBEAM_AURA_9"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_AURA"
using "MOONBEAM_AURA_9"
// data "AuraStatuses" "TARGET:IF(Character() and not Dead()):ApplyStatus(MOONBEAM_9,100,-1)"
data "AuraStatuses" "TARGET:IF(Character()and not Dead() and not (HasPassive('SculptSpells', context.Source) and Ally())):ApplyStatus(MOONBEAM_9,100,-1)"

// new entry "MOONBEAM_OWNER_3"
// type "StatusData"
// data "StatusType" "BOOST"
// using "MOONBEAM_OWNER"
// data "Boosts" "UnlockSpell(Target_Moonbeam_Move_3)"

new entry "MOONBEAM_OWNER_4"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_OWNER_3"
using "MOONBEAM_OWNER_4"
// data "Boosts" "UnlockSpell(Target_Moonbeam_Move_4,,,,Wisdom)"
data "Boosts" "UnlockSpell(Target_Moonbeam_Move_4)"

new entry "MOONBEAM_OWNER_5"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_OWNER"
using "MOONBEAM_OWNER_5"
// data "Boosts" "UnlockSpell(Target_Moonbeam_Move_5,,,,Wisdom)"
data "Boosts" "UnlockSpell(Target_Moonbeam_Move_5)"

new entry "MOONBEAM_OWNER_6"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_OWNER"
using "MOONBEAM_OWNER_6"
// data "Boosts" "UnlockSpell(Target_Moonbeam_Move_6,,,,Wisdom)"
data "Boosts" "UnlockSpell(Target_Moonbeam_Move_6)"

new entry "MOONBEAM_OWNER_7"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_OWNER"
using "MOONBEAM_OWNER_7"
// data "Boosts" "UnlockSpell(Target_Moonbeam_Move_7,,,,Wisdom)"
data "Boosts" "UnlockSpell(Target_Moonbeam_Move_7)"

new entry "MOONBEAM_OWNER_8"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_OWNER"
using "MOONBEAM_OWNER_8"
// data "Boosts" "UnlockSpell(Target_Moonbeam_Move_8,,,,Wisdom)"
data "Boosts" "UnlockSpell(Target_Moonbeam_Move_8)"

new entry "MOONBEAM_OWNER_9"
type "StatusData"
data "StatusType" "BOOST"
// using "MOONBEAM_OWNER"
using "MOONBEAM_OWNER_9"
// data "Boosts" "UnlockSpell(Target_Moonbeam_Move_9,,,,Wisdom)"
data "Boosts" "UnlockSpell(Target_Moonbeam_Move_9)"
